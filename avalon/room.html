<!DOCTYPE html>

{% autoescape true %}
<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  </head>
  <body>
    <div id="room_name" room_name={{ room_name }}> </div>
    <textarea id="status_label" cols="120" rows="20"> </textarea>
    <script type="text/javascript">
      
      function waitForReady() {
        room_name = document.getElementById('room_name').getAttribute('room_name')
        document.getElementById('status_label').value = room_name + ' is ' + checkReady(room_name);
      }

      function checkReady(room_name) {
        xmlHttp = new XMLHttpRequest();
        xmlHttp.open("GET", "ready/" + room_name, false);
        xmlHttp.send(null);
        return xmlHttp.responseText;
      }
      
      window.setInterval(function(){waitForReady()},1000);
    </script>  
  </body>
</html> 
{% endautoescape %}